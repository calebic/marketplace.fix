<Window x:Class="WpfApp1.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:shell="clr-namespace:System.Windows.Shell;assembly=PresentationFramework"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:WpfApp1"
        mc:Ignorable="d"
        Title="BeamNG Mod Marketplace Config Editor" Height="740" Width="1260"
        WindowStartupLocation="CenterScreen"
        Background="#0C0E12"
        FontFamily="Bahnschrift"
        WindowStyle="None"
        ResizeMode="CanResize">
    <shell:WindowChrome.WindowChrome>
        <shell:WindowChrome CaptionHeight="36" ResizeBorderThickness="6" GlassFrameThickness="0"/>
    </shell:WindowChrome.WindowChrome>
    <Window.Resources>
        <SolidColorBrush x:Key="CardBg" Color="#141821"/>
        <SolidColorBrush x:Key="CardBorder" Color="#242A36"/>
        <SolidColorBrush x:Key="TextPrimary" Color="#FFFFFF"/>
        <SolidColorBrush x:Key="TextMuted" Color="#E6E6E6"/>
        <SolidColorBrush x:Key="Accent" Color="#64C4FF"/>
        <SolidColorBrush x:Key="Danger" Color="#FFB454"/>
        <SolidColorBrush x:Key="BadText" Color="#FF6B6B"/>
        <SolidColorBrush x:Key="GoodText" Color="#73E083"/>

        <Style TargetType="{x:Type TextBlock}">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>
        <Style TargetType="{x:Type TextBox}">
            <Setter Property="Background" Value="#0F1218"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="8,6"/>
            <Setter Property="Margin" Value="10,4"/>
        </Style>
        <Style TargetType="{x:Type Button}">
            <Setter Property="Background" Value="#1C2330"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="14,8"/>
            <Setter Property="Margin" Value="0"/>
        </Style>
        <Style TargetType="{x:Type CheckBox}">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
        </Style>
        <Style TargetType="{x:Type DataGridColumnHeader}">
            <Setter Property="Background" Value="#1A212C"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="0,0,0,1"/>
            <Setter Property="Padding" Value="6,4"/>
        </Style>
        <Style TargetType="{x:Type ComboBox}">
            <Setter Property="Background" Value="#0F1218"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="BorderBrush" Value="{StaticResource CardBorder}"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,4"/>
            <Style.Resources>
                <ResourceDictionary>
                    <SolidColorBrush x:Key="{x:Static SystemColors.WindowBrushKey}" Color="#0F1218"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.WindowTextBrushKey}" Color="#FFFFFF"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="#1B2330"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="#FFFFFF"/>
                </ResourceDictionary>
            </Style.Resources>
        </Style>
        <Style TargetType="{x:Type ComboBoxItem}">
            <Setter Property="Background" Value="#0F1218"/>
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Setter Property="Padding" Value="6,4"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ComboBoxItem}">
                        <Border x:Name="ItemBorder" Background="{TemplateBinding Background}">
                            <ContentPresenter />
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#1B2330"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#212B3A"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type Thumb}">
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type Thumb}">
                        <Border Background="{TemplateBinding Background}" CornerRadius="6"/>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type ScrollBar}">
            <Setter Property="Background" Value="#0F1218"/>
            <Setter Property="Foreground" Value="#3B4556"/>
            <Setter Property="Width" Value="10"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type ScrollBar}">
                        <Grid Background="{TemplateBinding Background}">
                            <Track x:Name="PART_Track" IsDirectionReversed="True">
                                <Track.DecreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineUpCommand" Background="Transparent" Height="0"/>
                                </Track.DecreaseRepeatButton>
                                <Track.Thumb>
                                    <Thumb Background="{TemplateBinding Foreground}"/>
                                </Track.Thumb>
                                <Track.IncreaseRepeatButton>
                                    <RepeatButton Command="ScrollBar.LineDownCommand" Background="Transparent" Height="0"/>
                                </Track.IncreaseRepeatButton>
                            </Track>
                        </Grid>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type DataGridCell}">
            <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
            <Style.Triggers>
                <DataTrigger Binding="{Binding HasMissing}" Value="True">
                    <Setter Property="Foreground" Value="{StaticResource BadText}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
        <Style TargetType="{x:Type DataGridRow}">
            <Setter Property="Background" Value="Transparent"/>
            <Style.Triggers>
                <Trigger Property="IsSelected" Value="True">
                    <Setter Property="Background" Value="#1E2A3A"/>
                    <Setter Property="Foreground" Value="{StaticResource TextPrimary}"/>
                </Trigger>
                <Trigger Property="IsMouseOver" Value="True">
                    <Setter Property="Background" Value="#1B2330"/>
                </Trigger>
            </Style.Triggers>
        </Style>
    </Window.Resources>

    <Grid x:Name="RootGrid" Margin="14">
        <Grid.RowDefinitions>
            <RowDefinition Height="36"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <Border Grid.Row="0" Background="#0F1218" BorderBrush="{StaticResource CardBorder}" BorderThickness="0,0,0,1">
            <Grid x:Name="TitleBar" Height="36" VerticalAlignment="Top" MouseLeftButtonDown="TitleBar_MouseLeftButtonDown">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="BeamNG Mod Marketplace Config Editor | Discord: @ic.ey" VerticalAlignment="Center" Margin="12,0,0,0"
                           Foreground="{StaticResource TextPrimary}" FontWeight="SemiBold"/>
                <Button Grid.Column="2" Content="—" Width="44" Height="28" Margin="0,4,0,4"
                        shell:WindowChrome.IsHitTestVisibleInChrome="True"
                        Click="Minimize_Click"/>
                <Button Grid.Column="3" Content="✕" Width="44" Height="28" Margin="4,4,8,4"
                        shell:WindowChrome.IsHitTestVisibleInChrome="True"
                        Background="#2A2F3A" Click="Close_Click"/>
            </Grid>
        </Border>

        <Border Grid.Row="1" Padding="14" Background="{StaticResource CardBg}" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="8" Margin="0,10,0,0">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>
                <TextBlock Text="Mods folder" VerticalAlignment="Center"/>
                <TextBox x:Name="ModsPathTextBox" Grid.Column="1" Margin="10,0,0,0" MinWidth="420"/>
                <Button x:Name="BrowseButton" Grid.Column="2" Content="Browse" Margin="10,0,0,0" Click="BrowseMods_Click"/>
                <Button x:Name="ScanButton" Grid.Column="3" Content="Scan" Margin="10,0,0,0" Click="ScanMods_Click"/>
                <CheckBox x:Name="BackupCheckBox" Grid.Column="4" Margin="18,0,0,0"
                          Content="Backup before save" VerticalAlignment="Center" IsChecked="True"/>
            </Grid>
        </Border>

        <Grid Grid.Row="2" Margin="0,14,0,14">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="2*"/>
                <ColumnDefinition Width="3*"/>
            </Grid.ColumnDefinitions>

            <Border Grid.Column="0" Padding="10" Background="{StaticResource CardBg}" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="8">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="*"/>
                    </Grid.RowDefinitions>
                    <TextBlock Text="Configs" FontSize="16" FontWeight="SemiBold" Margin="2,0,0,10"/>
                    <Grid Grid.Row="1" Margin="0,0,0,10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="Auto"/>
                        </Grid.ColumnDefinitions>
                        <TextBox x:Name="SearchTextBox" Grid.Column="0" Margin="0" Height="30"
                                 VerticalContentAlignment="Center" TextChanged="SearchTextBox_TextChanged"
                                 ToolTip="Search mod, model, config, or name"/>
                        <CheckBox x:Name="MissingOnlyCheckBox" Grid.Column="1" Margin="10,0,0,0"
                                  VerticalAlignment="Center" Content="Missing only"
                                  Checked="FilterControl_Changed" Unchecked="FilterControl_Changed"/>
                        <CheckBox x:Name="GroupByModCheckBox" Grid.Column="2" Margin="12,0,0,0"
                                  VerticalAlignment="Center" Content="Group by mod" IsChecked="True"
                                  Checked="GroupByModCheckBox_Changed" Unchecked="GroupByModCheckBox_Changed"/>
                        <CheckBox x:Name="MissingFirstCheckBox" Grid.Column="3" Margin="12,0,0,0"
                                  VerticalAlignment="Center" Content="Missing first"
                                  Checked="SortControl_Changed" Unchecked="SortControl_Changed"/>
                    </Grid>
                    <Grid Grid.Row="2">
                        <TextBlock x:Name="EmptyStateTextBlock" Text="No configs match your filters."
                                   HorizontalAlignment="Center" VerticalAlignment="Center"
                                   Foreground="{StaticResource TextMuted}" Visibility="Collapsed"/>
                        <DataGrid x:Name="ConfigsGrid"
                              ItemsSource="{Binding Configs}"
                              AutoGenerateColumns="False"
                              IsReadOnly="True"
                              SelectionMode="Single"
                              SelectionChanged="ConfigsGrid_SelectionChanged"
                              HeadersVisibility="Column"
                              ColumnWidth="*"
                              VirtualizingPanel.IsVirtualizing="True"
                              VirtualizingPanel.VirtualizationMode="Recycling"
                              VirtualizingPanel.IsVirtualizingWhenGrouping="True"
                              ScrollViewer.CanContentScroll="True"
                              EnableRowVirtualization="True"
                              EnableColumnVirtualization="False"
                              GridLinesVisibility="None"
                              RowBackground="#101318"
                              AlternatingRowBackground="#141922"
                              Foreground="{StaticResource TextPrimary}"
                              Background="#0F1218"
                              BorderBrush="#1F2630"
                              BorderThickness="1"
                              RowHeight="26">
                            <DataGrid.GroupStyle>
                                <GroupStyle>
                                    <GroupStyle.ContainerStyle>
                                        <Style TargetType="{x:Type GroupItem}">
                                            <Setter Property="Margin" Value="0,0,0,8"/>
                                            <Setter Property="Template">
                                                <Setter.Value>
                                                    <ControlTemplate TargetType="{x:Type GroupItem}">
                                                        <Border Background="#18202B" BorderBrush="#283241" BorderThickness="1" CornerRadius="6" Padding="2">
                                                            <Expander IsExpanded="False" Background="#18202B" Padding="6">
                                                                <Expander.Header>
                                                                    <DockPanel>
                                                                        <TextBlock Text="{Binding Name}" FontWeight="SemiBold" Foreground="{StaticResource TextPrimary}"/>
                                                                        <TextBlock Text="{Binding ItemCount, StringFormat=  ({0} configs)}"
                                                                           Foreground="{StaticResource TextPrimary}" Margin="8,0,0,0"/>
                                                                    </DockPanel>
                                                                </Expander.Header>
                                                                <ItemsPresenter />
                                                            </Expander>
                                                        </Border>
                                                    </ControlTemplate>
                                                </Setter.Value>
                                            </Setter>
                                        </Style>
                                    </GroupStyle.ContainerStyle>
                                </GroupStyle>
                            </DataGrid.GroupStyle>
                            <DataGrid.Columns>
                            <DataGridTemplateColumn Header="Name" Width="3*" MinWidth="240">
                                    <DataGridTemplateColumn.CellTemplate>
                                        <DataTemplate>
                                            <StackPanel Orientation="Horizontal" VerticalAlignment="Center">
                                                <Border Background="#1A212C" Padding="6,2" CornerRadius="10" Margin="0,0,8,0">
                                                    <TextBlock x:Name="StatusText" Text="OK" Foreground="{StaticResource GoodText}" FontSize="11"/>
                                                </Border>
                                                <TextBlock Text="{Binding VehicleName}" VerticalAlignment="Center"/>
                                            </StackPanel>
                                            <DataTemplate.Triggers>
                                                <DataTrigger Binding="{Binding HasMissing}" Value="True">
                                                    <Setter TargetName="StatusText" Property="Text" Value="Missing"/>
                                                    <Setter TargetName="StatusText" Property="Foreground" Value="{StaticResource BadText}"/>
                                                </DataTrigger>
                                            </DataTemplate.Triggers>
                                        </DataTemplate>
                                    </DataGridTemplateColumn.CellTemplate>
                                </DataGridTemplateColumn>
                            <DataGridTextColumn Header="Config" Binding="{Binding ConfigKey}" Width="2*" MinWidth="160"/>
                        </DataGrid.Columns>
                        </DataGrid>
                    </Grid>
                </Grid>
            </Border>

            <Border Grid.Column="1" Margin="14,0,0,0" Padding="14" Background="{StaticResource CardBg}" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="8">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel>
                        <TextBlock Text="Config details" FontSize="16" FontWeight="SemiBold"/>
                        <TextBlock x:Name="ConfigPathText" Margin="0,4,0,12" Foreground="{StaticResource TextMuted}" TextWrapping="Wrap"/>

                        <Border Background="#11161F" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="6" Padding="8" Margin="0,0,0,10">
                            <Grid>
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*"/>
                                    <ColumnDefinition Width="Auto"/>
                                </Grid.ColumnDefinitions>
                                <TextBlock x:Name="ConfigSummaryText" Foreground="{StaticResource TextPrimary}" Margin="0,0,12,0"/>
                                <StackPanel Grid.Column="1" Orientation="Horizontal" HorizontalAlignment="Right">
                                    <Button Content="Auto Fill" Height="28" Click="AutoFillMissing_Click"/>
                                    <Button x:Name="AutoFillSettingsButton" Content="&#xE713;" Margin="8,0,0,0"
                                            Width="32" Height="28" Padding="0" VerticalAlignment="Center"
                                            FontFamily="Segoe MDL2 Assets" FontSize="14"
                                            Click="AutoFillSettingsButton_Click"/>
                                    <Popup x:Name="AutoFillSettingsPopup" Placement="Bottom" PlacementTarget="{Binding ElementName=AutoFillSettingsButton}"
                                           StaysOpen="False" AllowsTransparency="True">
                                        <Border Background="#0F1218" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="8" Padding="12">
                                            <StackPanel Width="260">
                                                <TextBlock Text="Auto-fill settings" FontWeight="SemiBold" Margin="0,0,0,8"/>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoBrandCheckBox" VerticalAlignment="Center" Content="Brand"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoBrandTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoCountryCheckBox" VerticalAlignment="Center" Content="Country"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoCountryTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoTypeCheckBox" VerticalAlignment="Center" Content="Type"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoTypeTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoBodyStyleCheckBox" VerticalAlignment="Center" Content="Body Style"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoBodyStyleTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoConfigTypeCheckBox" VerticalAlignment="Center" Content="Config Type"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoConfigTypeTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoYearCheckBox" VerticalAlignment="Center" Content="Default Year"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoYearTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoValueCheckBox" VerticalAlignment="Center" Content="Value"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoValueTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <Grid Margin="0,0,0,8">
                                                    <Grid.ColumnDefinitions>
                                                        <ColumnDefinition Width="Auto"/>
                                                        <ColumnDefinition Width="*"/>
                                                    </Grid.ColumnDefinitions>
                                                    <CheckBox x:Name="AutoPopulationCheckBox" VerticalAlignment="Center" Content="Population"/>
                                                    <TextBox Grid.Column="1" x:Name="AutoPopulationTextBox" Margin="8,0,0,0"/>
                                                </Grid>
                                                <StackPanel Orientation="Horizontal" HorizontalAlignment="Right">
                                                    <Button Content="Save" Click="AutoFillSettingsSave_Click"/>
                                                </StackPanel>
                                            </StackPanel>
                                        </Border>
                                    </Popup>
                                    <Button Content="&#xE74E;" Margin="8,0,0,0"
                                            Width="32" Height="28" Padding="0" VerticalAlignment="Center"
                                            FontFamily="Segoe MDL2 Assets" FontSize="14"
                                            Click="SaveChanges_Click"/>
                                    <Button Content="&#xE72C;" Margin="8,0,0,0"
                                            Width="32" Height="28" Padding="0" VerticalAlignment="Center"
                                            FontFamily="Segoe MDL2 Assets" FontSize="14"
                                            Click="ReloadSelected_Click"/>
                                </StackPanel>
                            </Grid>
                        </Border>

                        <Border x:Name="UnsavedBadge" Background="#2A323F" CornerRadius="10" Padding="8,2"
                                Margin="0,0,0,10" VerticalAlignment="Center" Visibility="Collapsed">
                            <TextBlock Text="Unsaved changes" Foreground="{StaticResource TextPrimary}" FontSize="11"/>
                        </Border>

                        <Grid Margin="0,0,0,12">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="120"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>

                            <TextBlock x:Name="BrandLabel" Grid.Row="0" Text="Brand" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="0" Grid.Column="1" x:Name="BrandTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="CountryLabel" Grid.Row="1" Text="Country" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="1" Grid.Column="1" x:Name="CountryTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="TypeLabel" Grid.Row="2" Text="Type" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="2" Grid.Column="1" x:Name="TypeTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="BodyStyleLabel" Grid.Row="3" Text="Body Style" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="3" Grid.Column="1" x:Name="BodyStyleTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="ConfigTypeLabel" Grid.Row="4" Text="Config Type" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="4" Grid.Column="1" x:Name="ConfigTypeTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="ConfigurationLabel" Grid.Row="5" Text="Configuration" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="5" Grid.Column="1" x:Name="ConfigurationTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="YearMinLabel" Grid.Row="6" Text="Year Min" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="6" Grid.Column="1" x:Name="YearMinTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="YearMaxLabel" Grid.Row="7" Text="Year Max" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="7" Grid.Column="1" x:Name="YearMaxTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="ValueLabel" Grid.Row="8" Text="Value" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="8" Grid.Column="1" x:Name="ValueTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="PopulationLabel" Grid.Row="9" Text="Population" VerticalAlignment="Center"/>
                            <TextBox Grid.Row="9" Grid.Column="1" x:Name="PopulationTextBox" Margin="10,4" TextChanged="FieldTextChanged"/>

                            <TextBlock x:Name="PopulationPresetLabel" Grid.Row="10" Text="Preset" VerticalAlignment="Center"/>
                            <ComboBox x:Name="PopulationPresetComboBox" Grid.Row="10" Grid.Column="1" Foreground="Black" Margin="10,4"
                                      SelectionChanged="PopulationPresetComboBox_SelectionChanged">
                                <ComboBoxItem Content="Custom" IsSelected="False"/>
                                <ComboBoxItem Content="Ultra-rare (1-50)"/>
                                <ComboBoxItem Content="Rare (50-200)"/>
                                <ComboBoxItem Content="Uncommon (200-800)"/>
                                <ComboBoxItem Content="Common (800-3000)"/>
                                <ComboBoxItem Content="Very common (3000-10000)"/>
                            </ComboBox>
                        </Grid>


                        <TextBlock Text="Parts value audit" Margin="0,16,0,4" FontWeight="SemiBold"/>
                        <Button Content="Audit Parts Value" HorizontalAlignment="Left" Click="AuditParts_Click"/>
                        <TextBox x:Name="PartsAuditTextBox" Margin="0,8,0,0" Height="160"
                                 IsReadOnly="True" TextWrapping="Wrap" VerticalScrollBarVisibility="Auto"
                                 Background="#0F1218" Foreground="{StaticResource TextPrimary}" BorderBrush="{StaticResource CardBorder}"/>
                    </StackPanel>
                </ScrollViewer>
            </Border>
        </Grid>

        <Border Grid.Row="3" Padding="10" Background="{StaticResource CardBg}" BorderBrush="{StaticResource CardBorder}" BorderThickness="1" CornerRadius="8">
            <TextBlock x:Name="StatusTextBlock" Foreground="{StaticResource TextMuted}"/>
        </Border>
    </Grid>
</Window>
